# Three silent men BEST HACK 2022
## Описание решения
Интерфейс приложения представляет из себя конфигурационный файл в формате .yaml  

Архитектура состоит из следующих частей 
- контроллер парсеров
- конвертер
- контроллер БД
- менеджер

На рисунке представлена архитектура проекта

![alt tag](https://github.com/Kobzev0826/three-silent-men/blob/master/%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0.png)

**Менеджер** отвечает за парсинг файла конфигурации и передачу необходимых параметров контроллерам  
**Контроллер парсеров** выбирает на основе параметров нужный тип парсера ( Файл, БД)  
в проект могут добавляться неогрониченное количество парсеров передающих данные конвертеру в формаате map<String, Object>  
При добавлении парсера необходимо лишь добавить ветку в контроллере парсеров  
**Конвертер** получает list значений необходимых для сохранения в БД  
**Контроллер БД** получает значение id для проверки на уникальность 
*все параметры указываются в конфигурационном файле*

## работа с конфигурационным файлом 
Конфигурационный файл config.yaml. *Может быть передан другой в Application.*  
В файле перечисляются источники с последовательной нумерацией совместе с атрибутами.  
Для всех источников обязательными являются поля type и addr.  
В конце документа зполняются два поля:
- UniqueValue
- validAttributes

UniqueValue - атрибут по которому проходит проверка уникальности
validAttributes - list с атрибутами для сохранения

в поле type указывается тип источника: 
- Для БД - "DB"
- для CSV подобных файлов "CSV"
- для json "json"

в поле addr указывется полный путь для файла или адрес БД  

Для CSV подобный файлов необходимо указать параметр separator  

для БД указываются следующие параметры: 
- login
- password
- table

## пример конфигурационного файла
```
  source1:  
    type: "CSV"  
    addr: "src/main/resources/azs.csv"  
    separator: "|"  
    
  source2:
    type: "json"
    addr: "src/main/resources/azs.json"
    
  source3:
    type: "DB"
    addr: "jdbc:postgresql://localhost:5432/best_hack"
    login: "postgres"
    password: "1"
    table: "gas_stations"
    
  UniqueValue: "name"
    
  validAttributes:
 - address
 - latitude
 - longtitude
 - name
 - country
 - phone
```

## Поддерживаемые форматы файлов
- csv подобные 
- json
